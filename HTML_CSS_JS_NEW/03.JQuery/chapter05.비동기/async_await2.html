<!DOCTYPE html>
<html lang="ko">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
   </head>
   <body>
      <script>
         function fetchJeju() {
            var url =
               'https://api.openweathermap.org/data/2.5/weather?appid=f87bea6a885ac83727abfff35aa45c52&q=jeju&units=metric&lang=kr'

            return fetch(url).then(function (response) {
               return response.json() //서버에서 얻어온 데이터 리턴
            })
         }
         function fetchSeoul() {
            var url =
               'https://api.openweathermap.org/data/2.5/weather?appid=f87bea6a885ac83727abfff35aa45c52&q=seoul&units=metric&lang=kr'

            return fetch(url).then(function (response) {
               return response.json() //서버에서 얻어온 데이터 리턴
            })
         }

         async function logTodoTitle() {
            //제주도 날씨를 가져온 후 데이터의 name에 'jeju'가 포함되어 있으면 서울 날씨를 가져온다.

            //fetchJeju()에서 실행되는 fetch()함수에서 데이터를 전부 가지고 온 후 실행
            var jeju = await fetchJeju()
            console.log(jeju)
            if (jeju.name.indexOf('Jeju') !== -1) {
               var seoul = await fetchSeoul()
               console.log(seoul)
            }
         }
         logTodoTitle()

         console.log('이것은 비동기입니다.')
      </script>
   </body>
</html>
